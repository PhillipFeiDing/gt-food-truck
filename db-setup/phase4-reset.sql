SET SQL_SAFE_UPDATES = 0;
DROP VIEW IF EXISTS login_classifier;
DROP TABLE IF EXISTS OrderDetail;
DROP TABLE IF EXISTS BuildingTag;
DROP TABLE IF EXISTS MenuItem;
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS `Admin`;
DROP TABLE IF EXISTS Staff;
DROP TABLE IF EXISTS FoodTruck;
DROP TABLE IF EXISTS Manager;
DROP TABLE IF EXISTS Employee;
DROP TABLE IF EXISTS Customer;
DROP TABLE IF EXISTS Food;
DROP TABLE IF EXISTS Station;
DROP TABLE IF EXISTS Building;
DROP TABLE IF EXISTS `User`;
CREATE TABLE `User`(username VARCHAR(55) PRIMARY KEY, `password` VARCHAR(255) NOT NULL, firstName VARCHAR(55) NOT NULL, lastName VARCHAR(55) NOT NULL, UNIQUE(firstName, lastName));
CREATE TABLE Building (buildingName VARCHAR(55) PRIMARY KEY, description TEXT NOT NULL);
CREATE TABLE Station (stationName VARCHAR(55) PRIMARY KEY, buildingName VARCHAR(55) NOT NULL UNIQUE, capacity INT NOT NULL, FOREIGN KEY (buildingName) REFERENCES Building (buildingName) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE Food (foodName VARCHAR(55) PRIMARY KEY);
CREATE TABLE Customer (username VARCHAR(55) PRIMARY KEY, balance DECIMAL(6, 2) NOT NULL, stationName VARCHAR(55), FOREIGN KEY (stationName) REFERENCES Station (stationName) ON DELETE SET NULL ON UPDATE RESTRICT, FOREIGN KEY (username) REFERENCES `User` (username) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE Employee (username VARCHAR(55) PRIMARY KEY, email VARCHAR(255) NOT NULL UNIQUE, FOREIGN KEY (username) REFERENCES `User` (username) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE Manager (username VARCHAR(55) PRIMARY KEY, FOREIGN KEY (username) REFERENCES Employee (username) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE FoodTruck (foodTruckName VARCHAR(55) PRIMARY KEY, stationName VARCHAR(55) NOT NULL, managerUsername VARCHAR(55) NOT NULL, FOREIGN KEY (stationName) REFERENCES Station (stationName) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY (managerUsername) REFERENCES Manager (username) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE Staff (username VARCHAR(55) PRIMARY KEY, foodTruckName VARCHAR(55), FOREIGN KEY (username) REFERENCES Employee (username) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (foodTruckName) REFERENCES FoodTruck (foodTruckName) ON DELETE SET NULL ON UPDATE CASCADE);
CREATE TABLE `Admin` (username VARCHAR(55) PRIMARY KEY, FOREIGN KEY (username) REFERENCES Employee (username) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE Orders (orderID INT AUTO_INCREMENT PRIMARY KEY, date DATE NOT NULL, customerUsername VARCHAR(55) NOT NULL, FOREIGN KEY (customerUsername) REFERENCES Customer (username) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE MenuItem (price DECIMAL(6,2) NOT NULL, foodTruckName VARCHAR(55) NOT NULL, foodName VARCHAR(55) NOT NULL, PRIMARY KEY (foodTruckName, foodName), FOREIGN KEY (foodName) REFERENCES Food (foodName) ON UPDATE RESTRICT ON DELETE RESTRICT, FOREIGN KEY (foodTruckName) REFERENCES FoodTruck (foodTruckName) ON UPDATE RESTRICT ON DELETE RESTRICT);
CREATE TABLE BuildingTag (buildingName VARCHAR(55) NOT NULL, tag VARCHAR(55) NOT NULL, PRIMARY KEY (buildingName, tag), FOREIGN KEY (buildingName) REFERENCES Building (buildingName) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE OrderDetail (orderID INT NOT NULL, foodTruckName VARCHAR(55) NOT NULL, foodName VARCHAR(55) NOT NULL, purchaseQuantity INT NOT NULL, PRIMARY KEY (orderID, foodTruckName, foodName), FOREIGN KEY (orderID) REFERENCES Orders (orderID) ON UPDATE RESTRICT ON DELETE RESTRICT, FOREIGN KEY (foodTruckName, foodName) REFERENCES MenuItem (foodTruckName, foodName) ON UPDATE RESTRICT ON DELETE RESTRICT);
INSERT INTO Building(buildingName,description) VALUES ("Clough","Has starbucks; located near to transit hub"),("College of Computing","Famously called as CoC"),("CrossLand Tower","Library"),("KLAUS Adv Computing","Connected to CoC through binary bridge"),("Molecular Engineering","Hosts classes for molecular engineering"),("Skiles","Host classes for media and literature students"),("Students_Center","Host for student activities"),("TechTower","Most Iconic building"),("Weber Building","Classes mostly related to space technology");
INSERT INTO Station(stationName,buildingName,capacity) VALUES ("Clough Commons","Clough",20.0),("CoC Court Yard","College of Computing",15.0),("Bio Quad","Molecular Engineering",20.0),("Skiles Walkway","Skiles",11.0),("Campanile","Students_Center",7.0);
INSERT INTO Food(foodName) VALUES ("CeasarSalad"),("Waffles"),("TrailMix"),("ChickenSandwich"),("Nachos"),("ChickenWings"),("HamBurger"),("VegetarianGumbo"),("CheeseBurger"),("Shawarma"),("Noodles"),("ChocolateShake"),("MargheritaPizza"),("Bagels"),("ElkBurger"),("SalmonTacos"),("ChickenTacos"),("SouthWestChickenSalad"),("VegetarianTacos"),("VegSpringRolls"),("VegPizza"),("HotDog"),("Pie"),("ShrimpGumbo");
INSERT INTO BuildingTag(buildingName,tag) VALUES ("College of Computing","Computing"),("Clough","LEED"),("KLAUS Adv Computing","Computing"),("CrossLand Tower","LEED"),("TechTower","ADA"),("Students_Center","LEED"),("TechTower","Registrar"),("Weber Building","ADA"),("Clough","ADA"),("Clough","Labs"),("Weber Building","Sciences"),("Molecular Engineering","Engineering"),("CrossLand Tower","Library"),("Skiles","Liberal Arts");
INSERT INTO `User`(username,`password`,firstname,lastname) VALUES ("2Cool_not_todoschool","4242424242","Smarty","Pants"),("4400_thebestclass","4400440044","Seriously","Itis"),("Aturning_Machine12","3333333333","Alan","Turing"),("beBatman!","5555555555","Bruce","Wayne"),("bestfriends4ever1","44444444433","C3P0","Droid"),("bestfriends4ever2","44444444443","R2D2","Droid"),("BuzzyAsAYellowJacket","1010101010","Buzz","Buzz"),("coxRaycox","4242424242","Ray","Cox"),("customer1","1111111111","One","One"),("customer2","1011111111","Two","Two"),("deer.john","22222022222","John","Deer"),("doe.jane","22222222200","Jane","Doe"),("doe.john","20000000002","John","Doe"),("EmmsBest","1000000011","Emma","Williams"),("employee1","1000111111","Employee","Won"),("Employeeofthemonth","1000011111","Beast","Boy"),("FatherofInfoTheory","2222222222","Claude","Shannon"),("ILikeFlowers","1000000001","Lily","Rose"),("JHallPride","2222222222","James","Hall"),("JNash28TheoryofGaming","1111111111","John","Nash"),("LadyVader1977","54545454545","Leia","Organa"),("LifeIsLikeABoxOfChoco.","4444444444","Forrest","Gump"),("LifeUniverseEverything","4242424242","Forty","Two"),("Manager1","1000001111","First","Manager"),("Manager2","1000000111","Second","Manager"),("Manager3","1000000011","Third","Manager"),("Manager4","1000000001","Fourth","Manager"),("mKJerrY","22222022222","Mike","Jerry"),("Nekonsh","8888888888","Nelsh","Kong"),("RPosince","2222222222","Prince","Ross"),("RRanskans","44444444433","Ruby","Rans"),("scoRa","7000000000","Dhey","Scott"),("sffrgerge","1000000000","Blah","BlahBlah"),("SShen","4444444444","Soms","Shen"),("Staff1","3333333333","One","Staff"),("Staff2","2222222222","Two","Staff"),("notmybusiness","7000000000","Kermit","TheFrog"),("theCustomersAlwaysRight","1001111111","Always","Everytime"),("thereal_GPBurdell","9999999999","George","Burdell"),("TingTong","1000000000","Eva","Bell"),("tkingTom","2222222222","Tom","King"),("TooCuteNottoMention","8888888888","Baby","Yoda"),("toongNonyLongy","20000000002","Tony","Long"),("Violax","4400440044","Violet","Lax"),("WomanWhoSmashedCode","4444444444","Elizabeth","Friedman"),("YayVish","6666666666","Vishy","Yay"),("YouBetterBeNiceToMe","6666666666","Talking","Tina");
UPDATE `User` SET `password` = md5(`password`);
INSERT INTO Customer(username,balance,stationName) VALUES ("4400_thebestclass",44.0,"Clough Commons"),("beBatman!",89.99,"Skiles Walkway"),("BuzzyAsAYellowJacket",0.5,"Skiles Walkway"),("coxRaycox",4.5,"CoC Court Yard"),("customer1",46.99,"Clough Commons"),("customer2",47.0,"CoC Court Yard"),("JHallPride",30.9,"Clough Commons"),("LifeUniverseEverything",42.42,"Campanile"),("mKJerrY",44.2,"Bio Quad"),("RPosince",67.89,"Campanile"),("RRanskans",7.78,"Bio Quad"),("sffrgerge",4.09,"Clough Commons"),("notmybusiness",19.55,"Bio Quad"),("theCustomersAlwaysRight",2.99,"CoC Court Yard"),("TingTong",50.25,"Bio Quad"),("tkingTom",70.14,"Skiles Walkway"),("toongNonyLongy",17.9,"Clough Commons"),("Violax",15.2,"Skiles Walkway"),("YouBetterBeNiceToMe",52.63,"Bio Quad");
INSERT INTO Employee(username,email) VALUES ("2Cool_not_todoschool","school@gmail.com"),("4400_thebestclass","4400_thebestclass@gatech.edu"),("Aturning_Machine12","machine12@outlook.com"),("beBatman!","beBatman!@gatech.edu"),("bestfriends4ever1","bff@hotmail.com"),("bestfriends4ever2","bff2@gmail.com"),("BuzzyAsAYellowJacket","BuzzyAsAYellowJacket@gatech.edu"),("deer.john","dj3@outlook.com"),("doe.jane","dj1@outlook.com"),("doe.john","dj2@outlook.com"),("EmmsBest","emmsbest@gatech.edu"),("employee1","employee1@gatech.edu"),("Employeeofthemonth","Employeeofthemonth@gatech.edu"),("FatherofInfoTheory","fot@gmail.com"),("ILikeFlowers","flora@gatech.edu"),("JNash28TheoryofGaming","jg@hotmail.com"),("LadyVader1977","lv1977@gatech.edu"),("LifeIsLikeABoxOfChoco.","chocolate@gmail.com"),("Manager1","manager1@gatech.edu"),("Manager2","manager2@gatech.edu"),("Manager3","manager3@gatech.edu"),("Manager4","manager4@gatech.edu"),("Nekonsh","nekonsh@gatech.edu"),("RRanskans","rranskans@gatech.edu"),("scoRa","scoRa@gatech.edu"),("sffrgerge","sff@outlook.com"),("SShen","sshen@gatech.edu"),("Staff1","staff1@gatech.edu"),("Staff2","staff2@gatech.edu"),("thereal_GPBurdell","gpb@gatech.edu"),("TingTong","tingtong@gatech.edu"),("TooCuteNottoMention","mention@gmail.com"),("Violax","violax@gatech.edu"),("WomanWhoSmashedCode","smashedcode@gmail.com"),("YayVish","yayvish@gatech.edu");
INSERT INTO `Admin`(username) VALUES ("4400_thebestclass"),("Nekonsh"),("scoRa");
INSERT INTO Manager(username) VALUES ("doe.jane"),("FatherofInfoTheory"),("LadyVader1977"),("LifeIsLikeABoxOfChoco."),("Manager1"),("Manager2"),("Manager3"),("Manager4"),("SShen"),("thereal_GPBurdell"),("YayVish");
INSERT INTO FoodTruck(foodTruckName,managerUsername,stationName) VALUES ("JohnJaneAndVenison","doe.jane","Campanile"),("FourAnalystInATacoTruck","FatherofInfoTheory","Clough Commons"),("GoodFoodTruck","FatherofInfoTheory","CoC Court Yard"),("BurgerBird","LadyVader1977","Clough Commons"),("FoodTrolley","LadyVader1977","Skiles Walkway"),("FoodTruckYoureLookingFor","LadyVader1977","Campanile"),("BubbaGumps","LifeIsLikeABoxOfChoco.","Campanile"),("CrazyPies","Manager1","Campanile"),("NachoBizness","Manager2","Campanile"),("TruckOfFood","Manager2","Campanile"),("ShawarmaExpress","Manager3","Bio Quad"),("WaffleTruffle","SShen","CoC Court Yard"),("GoodOnAStudentBudget","thereal_GPBurdell","Bio Quad"),("FusionFoodTruck","YayVish","Campanile");
INSERT INTO Staff(username,foodTruckName) VALUES ("2Cool_not_todoschool","WaffleTruffle"),("Aturning_Machine12","FourAnalystInATacoTruck"),("beBatman!","WaffleTruffle"),("bestfriends4ever1","FoodTruckYoureLookingFor"),("bestfriends4ever2","BurgerBird"),("BuzzyAsAYellowJacket","ShawarmaExpress"),("deer.john","JohnJaneAndVenison"),("doe.john","TruckOfFood"),("EmmsBest","CrazyPies"),("employee1","BurgerBird"),("Employeeofthemonth","ShawarmaExpress"),("ILikeFlowers","CrazyPies"),("JNash28TheoryofGaming","GoodFoodTruck"),("RRanskans","FoodTrolley"),("sffrgerge","GoodOnAStudentBudget"),("Staff1","BubbaGumps"),("Staff2","BubbaGumps"),("TingTong","FusionFoodTruck"),("TooCuteNottoMention","NachoBizness"),("Violax","FoodTrolley"),("WomanWhoSmashedCode","FourAnalystInATacoTruck");
INSERT INTO MenuItem(price,foodTruckName,foodName) VALUES (3.21,"FoodTruckYoureLookingFor","Nachos"),(9.06,"GoodFoodTruck","SouthWestChickenSalad"),(4.51,"FoodTrolley","Pie"),(4.28,"CrazyPies","MargheritaPizza"),(4.51,"GoodOnAStudentBudget","CheeseBurger"),(4.36,"JohnJaneAndVenison","TrailMix"),(6.22,"BubbaGumps","ShrimpGumbo"),(4.4,"GoodFoodTruck","Noodles"),(5.48,"GoodOnAStudentBudget","ChocolateShake"),(2.23,"GoodOnAStudentBudget","HotDog"),(6.65,"WaffleTruffle","Waffles"),(6.58,"NachoBizness","ChickenTacos"),(8.03,"FourAnalystInATacoTruck","SalmonTacos"),(4.7,"NachoBizness","VegetarianTacos"),(7.88,"FoodTruckYoureLookingFor","VegPizza"),(6.3,"ShawarmaExpress","Shawarma"),(3.82,"GoodOnAStudentBudget","HamBurger"),(5.95,"FusionFoodTruck","VegetarianTacos"),(3.53,"TruckOfFood","VegSpringRolls"),(5.21,"BubbaGumps","ChickenTacos"),(5.28,"FourAnalystInATacoTruck","ChickenWings"),(9.57,"FoodTruckYoureLookingFor","SouthWestChickenSalad"),(3.48,"CrazyPies","VegPizza"),(7.59,"NachoBizness","SalmonTacos"),(3.46,"GoodOnAStudentBudget","CeasarSalad"),(7.16,"FusionFoodTruck","SalmonTacos"),(5.82,"FoodTrolley","Waffles"),(6.22,"FourAnalystInATacoTruck","ChickenTacos"),(6.01,"FoodTrolley","ChickenWings"),(4.85,"ShawarmaExpress","ChocolateShake"),(3.11,"GoodFoodTruck","VegSpringRolls"),(6.68,"BurgerBird","ElkBurger"),(4.53,"BurgerBird","Pie"),(3.82,"BubbaGumps","VegetarianGumbo"),(4.19,"CrazyPies","Pie"),(7.54,"FoodTrolley","ChocolateShake"),(5.13,"NachoBizness","Nachos"),(7.05,"BurgerBird","HamBurger"),(4.77,"TruckOfFood","Noodles"),(3.44,"GoodOnAStudentBudget","Waffles"),(5.84,"FourAnalystInATacoTruck","VegetarianTacos"),(4.76,"BurgerBird","CheeseBurger"),(7.58,"FoodTruckYoureLookingFor","MargheritaPizza"),(10.17,"JohnJaneAndVenison","ElkBurger");
INSERT INTO Orders(customerUsername,date) VALUES ("customer1","2020-01-01"),("customer1","2020-01-01"),("customer2","2020-01-01"),("customer2","2020-02-01"),("customer1","2020-02-02"),("customer2","2020-02-03"),("theCustomersAlwaysRight","2020-02-04"),("theCustomersAlwaysRight","2020-02-04"),("notmybusiness","2020-02-04"),("customer1","2020-02-04"),("customer2","2020-02-05"),("theCustomersAlwaysRight","2020-02-05"),("notmybusiness","2020-02-05"),("notmybusiness","2020-02-05"),("notmybusiness","2020-02-06"),("theCustomersAlwaysRight","2020-02-06"),("notmybusiness","2020-02-06"),("customer1","2020-02-10"),("customer2","2020-02-10"),("customer2","2020-02-10"),("customer2","2020-02-10"),("BuzzyAsAYellowJacket","2020-02-10"),("BuzzyAsAYellowJacket","2020-02-10"),("customer1","2020-02-10"),("customer2","2020-02-10"),("BuzzyAsAYellowJacket","2020-02-11"),("customer2","2020-02-11"),("customer2","2020-02-22"),("customer2","2020-02-29"),("customer1","2020-02-29"),("customer1","2020-03-01"),("customer2","2020-03-01"),("customer2","2020-03-01"),("sffrgerge","2020-03-01"),("sffrgerge","2020-03-01"),("customer1","2020-03-01"),("LifeUniverseEverything","2020-03-01"),("beBatman!","2020-03-01"),("beBatman!","2020-03-01"),("YouBetterBeNiceToMe","2020-03-01"),("YouBetterBeNiceToMe","2020-03-01");
INSERT INTO OrderDetail(orderID,foodTruckName,foodName,purchaseQuantity) VALUES (35,"GoodOnAStudentBudget","Waffles",1),(31,"FourAnalystInATacoTruck","ChickenTacos",3),(26,"FoodTrolley","Pie",1),(26,"FoodTrolley","ChickenWings",6),(7,"BurgerBird","HamBurger",2),(24,"TruckOfFood","VegSpringRolls",5),(6,"FourAnalystInATacoTruck","SalmonTacos",1),(7,"BurgerBird","ElkBurger",2),(36,"GoodOnAStudentBudget","HamBurger",1),(36,"GoodOnAStudentBudget","ChocolateShake",1),(40,"CrazyPies","VegPizza",1),(31,"FourAnalystInATacoTruck","ChickenWings",5),(17,"ShawarmaExpress","Shawarma",6),(27,"FoodTruckYoureLookingFor","VegPizza",1),(11,"NachoBizness","ChickenTacos",1),(15,"FoodTrolley","ChickenWings",1),(22,"GoodOnAStudentBudget","Waffles",3),(6,"FourAnalystInATacoTruck","ChickenTacos",3),(11,"NachoBizness","SalmonTacos",3),(8,"ShawarmaExpress","Shawarma",2),(3,"GoodOnAStudentBudget","Waffles",2),(16,"FoodTrolley","ChickenWings",2),(1,"CrazyPies","Pie",2),(32,"BurgerBird","Pie",1),(22,"GoodOnAStudentBudget","CheeseBurger",1),(31,"FourAnalystInATacoTruck","SalmonTacos",3),(23,"GoodOnAStudentBudget","ChocolateShake",2),(10,"TruckOfFood","VegSpringRolls",3),(34,"FourAnalystInATacoTruck","ChickenWings",5),(38,"BubbaGumps","ChickenTacos",7),(32,"BurgerBird","CheeseBurger",3),(41,"BubbaGumps","VegetarianGumbo",1),(37,"BurgerBird","CheeseBurger",1),(19,"FourAnalystInATacoTruck","VegetarianTacos",3),(22,"GoodOnAStudentBudget","CeasarSalad",5),(13,"FoodTrolley","ChocolateShake",1),(20,"FourAnalystInATacoTruck","VegetarianTacos",2),(28,"BurgerBird","CheeseBurger",1),(14,"GoodOnAStudentBudget","HamBurger",4),(2,"GoodOnAStudentBudget","HotDog",1),(29,"FourAnalystInATacoTruck","ChickenWings",6),(33,"FoodTrolley","Pie",1),(41,"BubbaGumps","ShrimpGumbo",1),(24,"TruckOfFood","Noodles",1),(33,"FoodTrolley","Waffles",2),(40,"CrazyPies","MargheritaPizza",1),(35,"GoodOnAStudentBudget","CeasarSalad",2),(23,"GoodOnAStudentBudget","HamBurger",1),(25,"BurgerBird","Pie",1),(31,"FourAnalystInATacoTruck","VegetarianTacos",1),(21,"GoodOnAStudentBudget","ChocolateShake",1),(6,"FourAnalystInATacoTruck","ChickenWings",4),(33,"FoodTrolley","ChickenWings",5),(5,"NachoBizness","SalmonTacos",3),(18,"WaffleTruffle","Waffles",4),(12,"FoodTruckYoureLookingFor","MargheritaPizza",2),(34,"FourAnalystInATacoTruck","SalmonTacos",3),(21,"GoodOnAStudentBudget","CheeseBurger",1),(4,"FoodTrolley","ChickenWings",4),(3,"GoodOnAStudentBudget","CheeseBurger",1),(9,"JohnJaneAndVenison","TrailMix",2),(41,"BubbaGumps","ChickenTacos",1),(22,"GoodOnAStudentBudget","HotDog",1),(26,"FoodTrolley","Waffles",2),(39,"NachoBizness","Nachos",2),(11,"NachoBizness","Nachos",4),(30,"BubbaGumps","VegetarianGumbo",1),(1,"CrazyPies","VegPizza",1),(1,"CrazyPies","MargheritaPizza",1),(3,"GoodOnAStudentBudget","HamBurger",1),(11,"NachoBizness","VegetarianTacos",3),(10,"TruckOfFood","Noodles",1),(20,"FourAnalystInATacoTruck","ChickenWings",1),(12,"FoodTruckYoureLookingFor","VegPizza",2),(21,"GoodOnAStudentBudget","HamBurger",3),(26,"FoodTrolley","ChocolateShake",2),(2,"GoodOnAStudentBudget","CeasarSalad",1),(34,"FourAnalystInATacoTruck","ChickenTacos",3);
CREATE VIEW login_classifier AS SELECT username, 'Admin' AS userType FROM `Admin` WHERE username NOT IN (SELECT username FROM Customer) UNION SELECT username, 'Manager' AS userType FROM Manager WHERE username NOT IN (SELECT username FROM Customer) UNION SELECT username, 'Staff' AS userType FROM Staff WHERE username NOT IN (SELECT username FROM Customer) UNION SELECT username, 'Admin-Customer' AS userType FROM `Admin` WHERE username in (SELECT username FROM Customer) UNION SELECT username, 'Manager-Customer' AS userType FROM Manager WHERE username in (SELECT username FROM Customer) UNION SELECT username, 'Staff-Customer' AS userType FROM Staff WHERE username in (SELECT username FROM Customer) UNION SELECT username, 'Customer' AS userType FROM Customer WHERE username NOT IN (SELECT username FROM Employee);